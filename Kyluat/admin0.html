<!DOCTYPE html><html lang="vi"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Admin 0 - Super Control Panel</title><link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet"><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script><style>:root{--primary:#8b5cf6;--danger:#ef4444;--glass:rgba(255, 255, 255, 0.05);--glass-border:rgba(255, 255, 255, 0.1)}*{margin:0;padding:0;box-sizing:border-box;font-family:Outfit,sans-serif}body{background:#0f172a;color:#fff;min-height:100vh;padding:40px 5%}.container{max-width:800px;margin:0 auto}.card{background:var(--glass);border:1px solid var(--glass-border);border-radius:24px;padding:30px;margin-bottom:30px}h2{margin-bottom:20px;color:var(--primary);display:flex;align-items:center;gap:10px}.form-group{margin-bottom:20px}label{display:block;margin-bottom:8px;color:#94a3b8;font-size:.9rem}input,select{width:100%;padding:12px;border-radius:12px;border:1px solid var(--glass-border);background:rgba(255,255,255,.03);color:#fff;outline:0;transition:.3s}input:focus{border-color:var(--primary)}.btn{padding:12px 24px;border-radius:12px;border:none;font-weight:600;cursor:pointer;transition:.3s}.btn-primary{background:var(--primary);color:#fff}.btn-danger{background:var(--danger);color:#fff}.status-badge{padding:5px 12px;border-radius:20px;font-size:.8rem;font-weight:700}.status-active{background:rgba(16,185,129,.2);color:#10b981}.status-locked{background:rgba(239,68,68,.2);color:#ef4444}</style></head><body><div class="container"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:40px"><h1>Super Admin (Admin 0)</h1><button class="btn btn-danger" onclick="logout()">ThoÃ¡t</button></div><div class="card"><h2>ğŸ‘¤ Quáº£n LÃ½ Danh SÃ¡ch Admin 1</h2><p style="color:#94a3b8;font-size:.85rem;margin-bottom:20px">Táº¡o vÃ  quáº£n lÃ½ cÃ¡c tÃ i khoáº£n Admin 1 (NgÆ°á»i Ä‘iá»u hÃ nh chÃ­nh).</p><div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:20px"><div class="form-group" style="margin-bottom:0"><label>ID ÄÄƒng nháº­p Admin 1</label> <input type="text" id="admin1Id" placeholder="VD: ADMIN_LHP"></div><div class="form-group" style="margin-bottom:0"><label>Máº­t kháº©u</label> <input type="text" id="admin1Pass" placeholder="VD: lhp123456"></div></div><button class="btn btn-primary" onclick="addAdmin1()" style="width:100%">ThÃªm Admin 1 Má»›i</button><div style="margin-top:30px"><table style="width:100%;border-collapse:collapse"><thead><tr style="text-align:left;border-bottom:1px solid var(--glass-border)"><th style="padding:10px;color:#94a3b8">ID</th><th style="padding:10px;color:#94a3b8">Máº­t kháº©u</th><th style="padding:10px;color:#94a3b8;text-align:right">HÃ nh Ä‘á»™ng</th></tr></thead><tbody id="admin1TableBody"></tbody></table></div></div><div class="card"><h2>ğŸ’¾ Xuáº¥t Dá»¯ Liá»‡u TÄ©nh (Tiáº¿t Kiá»‡m BÄƒng ThÃ´ng)</h2><p style="color:#94a3b8;font-size:.85rem;margin-bottom:20px">Táº£i toÃ n bá»™ danh sÃ¡ch há»c sinh (bao gá»“m áº£nh) thÃ nh file <b>student_data.js</b>. Sau Ä‘Ã³ báº¡n cÃ³ thá»ƒ dÃ¹ng file nÃ y Ä‘á»ƒ cháº¡y web mÃ  khÃ´ng tá»‘n dung lÆ°á»£ng Firebase.</p><button class="btn" style="background:#10b981;color:#fff;width:100%" onclick="exportStaticData()">ğŸ“¥ Táº£i Dá»¯ Liá»‡u Há»c Sinh (student_data.js)</button></div><div class="card"><h2>ğŸ—‘ï¸ Dá»n Dáº¹p áº¢nh TrÃªn Firebase (Giáº£i PhÃ³ng Dung LÆ°á»£ng)</h2><p style="color:#ef4444;font-size:.85rem;margin-bottom:20px"><b>Cáº¢NH BÃO:</b> Chá»‰ dÃ¹ng tÃ­nh nÄƒng nÃ y SAU KHI Ä‘Ã£ xuáº¥t file <b>student_data.js</b> vÃ  thÃªm vÃ o code.<br>HÃ nh Ä‘á»™ng nÃ y sáº½ XÃ“A TOÃ€N Bá»˜ áº£nh há»c sinh trÃªn Firebase Ä‘á»ƒ tiáº¿t kiá»‡m bÄƒng thÃ´ng.</p><button class="btn" style="background:#ef4444;color:#fff;width:100%" onclick="cleanDatabasePhotos()">ğŸ—‘ï¸ XÃ³a áº¢nh TrÃªn Firebase</button></div><div class="card"><h2>âš™ï¸ Cáº¥u HÃ¬nh Há»‡ Thá»‘ng</h2><p style="color:#94a3b8;font-size:.85rem;margin-bottom:20px">Äiá»u hÃ nh thá»i gian sá»­ dá»¥ng vÃ  tráº¡ng thÃ¡i khÃ³a cá»§a toÃ n bá»™ há»‡ thá»‘ng.</p><div class="form-group"><label>NgÃ y háº¿t háº¡n sá»­ dá»¥ng</label> <input type="date" id="expiryDate"><p id="daysRemaining" style="margin-top:5px;font-size:.8rem;color:var(--primary)"></p></div><div class="form-group"><label>PhÃ¢n quyá»n hoáº¡t Ä‘á»™ng (Táº¯t/Báº­t tá»«ng Admin)</label><div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;background:rgba(255,255,255,.03);padding:15px;border-radius:12px;border:1px solid var(--glass-border)"><div style="display:flex;align-items:center;gap:10px"><input type="checkbox" id="permAdmin1" style="width:20px;height:20px"> <label for="permAdmin1" style="margin:0">Cho phÃ©p Admin 1</label></div><div style="display:flex;align-items:center;gap:10px"><input type="checkbox" id="permAdmin2" style="width:20px;height:20px"> <label for="permAdmin2" style="margin:0">Cho phÃ©p Admin 2</label></div><div style="display:flex;align-items:center;gap:10px"><input type="checkbox" id="permAdmin3" style="width:20px;height:20px"> <label for="permAdmin3" style="margin:0">Cho phÃ©p Admin 3</label></div><div style="display:flex;align-items:center;gap:10px"><input type="checkbox" id="permAdmin4" style="width:20px;height:20px"> <label for="permAdmin4" style="margin:0">Cho phÃ©p Admin 4</label></div></div></div><div class="form-group"><label>ThÃ´ng bÃ¡o hiá»ƒn thá»‹ khi khÃ³a/háº¿t háº¡n</label> <input type="text" id="systemMessage" placeholder="VD: Há»‡ thá»‘ng Ä‘ang báº£o trÃ¬. Vui lÃ²ng quay láº¡i sau."></div><button class="btn btn-primary" onclick="saveConfig()" style="width:100%">LÆ°u Cáº¥u HÃ¬nh Tá»•ng</button></div></div><script src="firebase.config.js"></script><script src="../student_data.js"></script><script>"admin0"!==sessionStorage.getItem("kyluat_role")&&(window.location.href="../index.html");let admin1IdInput=document.getElementById("admin1Id"),admin1PassInput=document.getElementById("admin1Pass"),expiryDateInput=document.getElementById("expiryDate"),permAdmin1=document.getElementById("permAdmin1"),permAdmin2=document.getElementById("permAdmin2"),permAdmin3=document.getElementById("permAdmin3"),permAdmin4=document.getElementById("permAdmin4"),systemMessageInput=document.getElementById("systemMessage"),daysRemainingText=document.getElementById("daysRemaining"),admin1TableBody=document.getElementById("admin1TableBody");async function addAdmin1(){var e=admin1IdInput.value.trim().toUpperCase(),n=admin1PassInput.value.trim();if(!e||!n)return alert("Vui lÃ²ng nháº­p Ä‘á»§ ID vÃ  Pass");await rootRef.child("Settings/Admin1List").child(e).set({pass:n}),admin1IdInput.value="",admin1PassInput.value="",alert("ÄÃ£ thÃªm Admin 1 má»›i!")}async function deleteAdmin1(e){confirm(`XÃ³a tÃ i khoáº£n Admin 1: ${e}?`)&&await rootRef.child("Settings/Admin1List").child(e).remove()}async function saveConfig(){var e=expiryDateInput.value,n=systemMessageInput.value.trim(),t={admin1:permAdmin1.checked,admin2:permAdmin2.checked,admin3:permAdmin3.checked,admin4:permAdmin4.checked};await rootRef.child("Settings/Config").set({expiryDate:e,permissions:t,message:n}),alert("ÄÃ£ lÆ°u cáº¥u hÃ¬nh há»‡ thá»‘ng!")}async function cleanDatabasePhotos(){if(confirm("Cáº¢NH BÃO QUAN TRá»ŒNG!\n\nBáº¡n cÃ³ cháº¯c cháº¯n Ä‘Ã£ Backup dá»¯ liá»‡u (xuáº¥t file student_data.js) chÆ°a?\nHÃ nh Ä‘á»™ng nÃ y sáº½ xÃ³a vÄ©nh viá»…n áº£nh trÃªn Firebase vÃ  khÃ´ng thá»ƒ khÃ´i phá»¥c náº¿u chÆ°a backup.\n\nNháº¥n OK Ä‘á»ƒ Tiáº¿p tá»¥c XÃ“A.")){prompt("Vui lÃ²ng nháº­p máº­t kháº©u Admin 0 Ä‘á»ƒ xÃ¡c nháº­n:");if(confirm("XÃ¡c nháº­n láº§n cuá»‘i: XÃ“A TOÃ€N Bá»˜ áº¢NH TRÃŠN DATABASE?"))try{var e=await rootRef.child("Students").once("value");let n={},t=0;e.forEach(e=>{e.val().photo&&(n["Students/"+e.key+"/photo"]=null,t++)}),0<t?(await rootRef.update(n),alert(`ÄÃ£ xÃ³a áº£nh cá»§a ${t} há»c sinh thÃ nh cÃ´ng!
Dung lÆ°á»£ng Database Ä‘Ã£ Ä‘Æ°á»£c giáº£i phÃ³ng.`)):alert("KhÃ´ng tÃ¬m tháº¥y áº£nh nÃ o Ä‘á»ƒ xÃ³a (Database cÃ³ thá»ƒ Ä‘Ã£ sáº¡ch).")}catch(e){alert("Lá»—i khi xÃ³a áº£nh: "+e.message)}}}async function exportStaticData(){if(confirm("Há»‡ thá»‘ng sáº½ táº£i toÃ n bá»™ danh sÃ¡ch há»c sinh. Viá»‡c nÃ y cÃ³ thá»ƒ máº¥t vÃ i giÃ¢y. Tiáº¿p tá»¥c?"))try{var e=await rootRef.child("Students").once("value");let i={},a=("undefined"!=typeof STATIC_STUDENTS&&STATIC_STUDENTS.forEach(e=>{e.photo&&(i[e.id]=e.photo)}),[]);e.forEach(e=>{var n=e.val();let t=n.photo||"";!t&&i[e.key]&&(t=i[e.key]),a.push({id:e.key,name:n.name,class:n.class,photo:t})});var n=`// Dá»¯ liá»‡u há»c sinh tÄ©nh (ÄÆ°á»£c xuáº¥t tá»« Admin 0)
// Cáº­p nháº­t lÃºc: ${(new Date).toLocaleString()}

const STATIC_STUDENTS = ${JSON.stringify(a,null,2)};`,t=new Blob([n],{type:"text/javascript"}),d=URL.createObjectURL(t),m=document.createElement("a");m.href=d,m.download="student_data.js",document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(d),alert(`ÄÃ£ xuáº¥t ${a.length} há»c sinh thÃ nh cÃ´ng! HÃ£y copy file nÃ y vÃ o thÆ° má»¥c code.`)}catch(e){alert("Lá»—i khi xuáº¥t dá»¯ liá»‡u: "+e.message)}}function logout(){sessionStorage.clear(),window.location.href="../index.html"}rootRef.child("Settings").on("value",e=>{var n,e=e.val()||{};admin1TableBody.innerHTML="",e.Admin1List&&Object.entries(e.Admin1List).forEach(([e,n])=>{var t=document.createElement("tr");t.style.borderBottom="1px solid rgba(255,255,255,0.05)",t.innerHTML=`
                        <td style="padding: 10px;">${e}</td>
                        <td style="padding: 10px;">${n.pass}</td>
                        <td style="padding: 10px; text-align: right;">
                            <button class="btn btn-danger" style="padding: 5px 12px; font-size: 0.75rem;" onclick="deleteAdmin1('${e}')">XÃ³a</button>
                        </td>
                    `,admin1TableBody.appendChild(t)}),e.Config&&(expiryDateInput.value=e.Config.expiryDate||"",n=e.Config.permissions||{admin1:!0,admin2:!0,admin3:!0,admin4:!0},permAdmin1.checked=!1!==n.admin1,permAdmin2.checked=!1!==n.admin2,permAdmin3.checked=!1!==n.admin3,permAdmin4.checked=!1!==n.admin4,e.Config.expiryDate)&&(n=new Date(e.Config.expiryDate)-new Date,e=Math.ceil(n/864e5),daysRemainingText.textContent=0<e?`CÃ²n ${e} ngÃ y sá»­ dá»¥ng`:"ÄÃ£ háº¿t háº¡n!")})</script></body></html>